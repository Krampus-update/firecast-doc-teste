<!DOCTYPE html>
<html lang="en">
	<head>
		
		
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		
		
		<link rel="shortcut icon" href="../img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>Objeto Scene - Firecast Documentation</title>
		<link href="../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="../css/font-awesome-5.12.2-all.min.css" rel="stylesheet">
		<link href="../css/base.css" rel="stylesheet">
		<link rel="stylesheet" href="../css/highlight-github.css">
		<script src="../bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="../js/highlight.pack.js"></script>
		
		<script>
			var base_url = '..';
			var home_url = '../home';
			var is_outer_page = false;
			
			var pageToc = [
				{title: "Objeto Scene", url: "#_top", children: [
				]},
				{title: "Objeto Scene", url: "#objeto-scene_1", children: [
						
				{title: "Heran\u00e7a", url: "#_top", children: [
				]},
				{title: "Caracter\u00edsticas", url: "#caracteristicas", children: [
				]},
				{title: "Exemplos", url: "#exemplos", children: [
				]},
				]},
			];

		</script>
		<script src="../js/base.js"></script> 
	</head>

	<body class="inner-page">
		

		<div class="container-fluid wm-page-content">
			<a name="_top" aria-hidden="true"></a>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../Ascamadasdotabuleiro/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../Ascamadasdotabuleiro/" class="btn btn-sm btn-link">
			As camadas do tabuleiro
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../ObjetoSceneBaseObject/" class="btn btn-sm btn-link">
			Objeto SceneBaseObject
		</a>
		<a href="../ObjetoSceneBaseObject/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			

			<h1 id="objeto-scene">Objeto Scene</h1>
<h1 id="objeto-scene_1">Objeto Scene</h1>
<p>O Objeto Scene representa um "tabuleiro de combate" aberto pelo usuário e é a instância principal de um Scene e, através deste objeto, o programador consegue acessar todas as propriedades do mesmo.</p>
<p>&nbsp;</p>
<p>O programador <strong>não</strong> consegue instanciar um "Objeto Scene" através do SDK 3, mas:&nbsp;</p>
<ul>
<li>&nbsp;</li>
<li>Consegue descobrir todos os Scenes abertos pelo usuário utilizando a função <a href="../BibliotecaSceneLib/#getScenes()">SceneLib.getScenes</a></li>
<li>Consegue instalar um plug-in de Scene para todos os plug-ins abertos (e que vierem a ser abertos depois) utilizando a função <a href="../BibliotecaSceneLib/#registerPlugin()">SceneLib.registerPlugin</a>.</li>
</ul>
<p>&nbsp;</p>
<h2 id="heranca">Herança</h2>
<p>O o<strong>bjeto Scene</strong> herda de <a href="../ObjetoSceneBaseObject/">SceneBaseObject</a> e possui também todas as suas características.</p>
<h2 id="caracteristicas">Características</h2>
<p>Além das características herdadas, o objeto Scene também possui as seguintes características:</p>
<h3 id="propriedades-e-atributos">Propriedades e atributos</h3>
<table>
<thead>
<tr>
<th><strong>Propriedade</strong></th>
<th>Tipo</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>worldWidth</strong></td>
<td>Double</td>
<td>Define a LARGURA do tabuleiro de combate. O valor desta propriedade contem o valor em <a href="../MetricadoMundovsMetricadaTela/">Métrica do Mundo Scene</a>.&nbsp;</td>
</tr>
<tr>
<td><strong>worldHeight</strong></td>
<td>Double</td>
<td>Define a ALTURA do tabuleiro de combate. O valor desta propriedade contem o valor em <a href="../MetricadoMundovsMetricadaTela/">Métrica do Mundo Scene</a>.&nbsp;</td>
</tr>
<tr>
<td><strong>worldMetricName</strong></td>
<td>String</td>
<td>Define o nome da <a href="../MetricadoMundovsMetricadaTela/">métrica do mundo</a> que é usada por este scene.&nbsp; Exemplo: "m", "km", "cm", etc..&nbsp; Exemplo2: supondo que a propriedade worldWidth = 60 e worldMetricName = "km", intepreta-se que tabuleiro possui uma largura de 60 quilômetros.&nbsp;</td>
</tr>
<tr>
<td><strong>bkgColor</strong></td>
<td><a href="../StringdecoresnoLuaForm/">String de Color</a></td>
<td>Define a cor de fundo do tabuleiro.&nbsp; Exemplo: "white", "black", "#FFDE05"&nbsp;</td>
</tr>
<tr>
<td><strong>bkgImageURL</strong></td>
<td>String</td>
<td>Contém a URL da imagem/bitmap que será renderizada como fundo do tabuleiro.&nbsp; Este valor: Pode ser um endereço de internet (exemplo: “<a href="http://xxxx.com.br/a.png">http://xxxx.com.br/a.png</a>”)&nbsp; Pode ser o caminho de um arquivo contido no pacote do plugin. Pode ser um arquivo que se encontra no <a href="../HDVirtual/">HD Virtual</a> do plugin instalado.&nbsp;</td>
</tr>
<tr>
<td><strong>workingLayer</strong></td>
<td>Enumerado: "background" "objects" "tokens"&nbsp;</td>
<td>Define qual em que camada do scene o usuário está trabalhando.&nbsp; "map" - O usuário está trabalhando na camada Background&nbsp; "objects" - O usuário está trabalhando na camada Objetos&nbsp; "tokens" - O usuário está trabalhando na camada Tokens.&nbsp; Este é um valor local e não é compartilhado com os outros usuários que estão visualizando o mesmo scene.&nbsp; Saiba mais sobre as camadas em: <a href="../Ascamadasdotabuleiro/">As camadas do tabuleiro</a>&nbsp;</td>
</tr>
<tr>
<td><strong>viewport</strong></td>
<td><a href="../ObjetoSceneViewport/">Objeto SceneViewport</a></td>
<td>(Somente Leitura) Objeto viewport do Scene. Objeto que contém propriedades sobre a "tela" do Scene, como "Qual região do scene o usuário está vendo", "Qual o zoom que o usuário aplicou no tabuleiro?", etc..&nbsp;</td>
</tr>
<tr>
<td><strong>grid</strong></td>
<td><a href="../ObjetoSceneGridLayer/">Objeto SceneGridLayer</a></td>
<td>(Somente Leitura) Objeto que contém características, informações e utilitários a respeito da GRID do scene.&nbsp;</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td><a href="../ObjetoSceneGraphicItemList/">Objeto SceneGraphicItemList</a></td>
<td>(Somente Leitura) Objeto que reúne os itens visuais do tabuleiro como tokens.&nbsp;</td>
</tr>
<tr>
<td><strong>fogOfWar</strong></td>
<td><a href="../ObjetoSceneFogOfWar/">Objeto SceneFogOfWar</a></td>
<td>(Somente Leitura) Objeto que reúne informações e operações com o FogOfWar/Névoa de Guerra do Tabuleiro de combate.&nbsp;</td>
</tr>
<tr>
<td><strong>isGM</strong></td>
<td>Boolean</td>
<td>(Somente Leitura) True se o usuário atual é mestre deste scene ou false.&nbsp;</td>
</tr>
<tr>
<td><strong>isViewingAsGM</strong></td>
<td>Boolean</td>
<td>True se o usuário atual for mestre e estiver visualizado como mestre do scene.&nbsp; O usuário atual pode ser mestre mas desejar ver como os jogadores estão enxergando o scene, então isGM = true e isViewingAsGM = false.&nbsp;</td>
</tr>
<tr>
<td><strong>isViewingWalls</strong></td>
<td>Boolean</td>
<td>True se o usuário atual for mestre e estiver visualizado as paredes/áreas opacas do tabuleiro.&nbsp;</td>
</tr>
<tr>
<td><strong>currentUserID</strong></td>
<td>String</td>
<td>(Somente Leitura) Contém o login do usuário atual que está utilizando o Scene.&nbsp;</td>
</tr>
<tr>
<td><strong>renderAsPlayer</strong></td>
<td>Boolean</td>
<td>(Somente Leitura) Uma propriedade bem peculiar e mais difícil de explicar. Algumas vezes, mesmo quando "isGM" é true e "isViewingAsGM" é true, o tabuleiro deve ser renderizado como "visualizando como jogador".&nbsp; Esta propriedade foi feita inicialmente pensando na integração do Firecast com o programa "OBS Studio" para streaming. Enquanto o mestre está visualizando o tabuleiro como GM, o tabuleiro deve ser renderizado como jogador para o "OBS Studio".&nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3 id="metodos">Métodos</h3>
<table>
<thead>
<tr>
<th><strong>Método</strong></th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>scene:newTransaction()</strong></td>
<td>Cria um NodeTransaction que poderá ser utilizado para gerenciar as mudanças feitas localmente no Scene.&nbsp; Retorna: Um objeto <a href="../ObjetoNodeTransaction/">NodeTransaction</a> que poderá ser utilizado em scene:pushTransaction()&nbsp;</td>
</tr>
<tr>
<td><strong>scene:pushTransaction(transaction)</strong></td>
<td>Ativa uma transação para controlar mudanças no Scene.&nbsp; Parâmetros: transaction - um <a href="../ObjetoNodeTransaction/">objeto NodeTransaction</a> previamente criado pela função <a href="./#scene:newTransaction()">scene:newTransaction</a> que controlará as próximas mudanças no Scene.&nbsp; Observações: Após ativar uma transação, todas as alterações que ocorrerem no Scene serão mantidas localmente e não serão compartilhadas automaticamente com os outros usuários. Você deverá controlar o que acontecerá com estas mudanças ao invocar "<a href="../ObjetoNodeTransaction/#transaction:rollback()">transaction:rollback()</a>" se quiser desfazê-las ou "<a href="../ObjetoNodeTransaction/#transaction:commit()">transaction:commit()</a>" para confirmá-las e compartilhar-lhas com os outros usuários. Para cada chamada de <a href="./#scene:pushTransaction()">scene:pushTransaction()</a>, deve haver uma chamada de <a href="./#scene:popTransaction()">scene:popTransaction()</a>.&nbsp;</td>
</tr>
<tr>
<td><strong>scene:popTransaction()</strong></td>
<td>Desativa a última transação ativada no Scene pela função <a href="./#scene:pushTransaction()">scene:pushTransaction()</a>&nbsp; Observações: Para cada chamada de <a href="./#scene:pushTransaction()">scene:pushTransaction()</a>, deve haver uma chamada de <a href="./#scene:popTransaction()">scene:popTransaction()</a>. Se antes de chamar pushTransaction o Scene já estava sendo controlado por alguma transação, esta transação é restaurada. Apenas invocar este método não é o suficiente para realizar o controle das mudanças. Você o invocar o método "<a href="../ObjetoNodeTransaction/#transaction:rollback()">rollback()</a>" da transaction se quiser desfazer as mudanças capturadas ou invocar o método "<a href="../ObjetoNodeTransaction/#transaction:commit()">commit()</a>" da transaction para confirmar e compartilhar as mudanças capturadas. &nbsp;</td>
</tr>
<tr>
<td><strong>scene:broadcastMessage(messageId, message [, loopBack])</strong></td>
<td>Envia uma mensagem a todos os outros usuários que estão com o scene aberto.&nbsp; Parâmetros: messageId - Uma cadeia de caracteres contendo a identificação da mensagem. message - A mensagem a ser transmitida. Aqui são aceitos textos, tabelas lua, números e booleanos. (OPICIONAL) loopBack - Informa se quer que esta mensagem seja retransmitida para você mesmo. Valor padrão: false &nbsp; Observações: A mensagem enviada é entregue a todos os outros usuários conectados no scene. Para receber as mensagens recebidas, o usuário destinatário deve ter previamente invocado a função <a href="./#scene:newBroadcastListener">scene:newBroadcastListener</a>&nbsp;</td>
</tr>
<tr>
<td><strong>scene:newBroadcastListener(messageId, callback)</strong></td>
<td>Cria uma escuta de mensagens para receber mensagens postadas pela função <a href="./#scene:broadcastMessage">scene:broadcastMessage </a>&nbsp; Parâmetros: messageId - Uma cadeia de caracteres contendo a identificação das mensagens que deseja receber. Deve ser igual ao messageId usado na função <a href="./#scene:broadcastMessage">scene:broadcastMessage</a>. callback - Uma função que será invocada ao receber mensagens. Esta função recebe três parâmetros na seguinte ordem: sender - Cadeia de caracteres contendo o <strong>login</strong> do usuário que enviou a mensagem messageId - Cadeia de caracteres contendo a identificação da mensagem recebida message - A mensagem que foi postada.&nbsp; Retorno: Retorna um objeto representando o Listener.&nbsp; Observações: Importante: Mantenha referência ao objeto retornado por esta função enquanto quiser que a escuta esteja ativa. Se o coletor de lixo LUA coletar este objeto, a escuta é destruída e a função callback não será mais invocada. Se quiser destruir a escuta imediatamente, invoque a função destroy do objeto retornado.... obj:destroy();&nbsp;</td>
</tr>
<tr>
<td><strong>scene:sendDelayedUpdates()</strong></td>
<td>Force the scene to transmit all the pending delayed updates caused by the network transfer optimization</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3 id="eventos">Eventos</h3>
<table>
<thead>
<tr>
<th><strong>Nome do evento</strong></th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>onWorkingLayerChange</strong></td>
<td>Evento que é chamado quando a propriedade <a href="./#workingLayer">workingLayer</a> for alterada.&nbsp;</td>
</tr>
<tr>
<td><strong>onGMStateChange</strong></td>
<td>Evento que é chamado quando as propriedades isGM, isViewingAsGM ou isViewingWalls mudarem.&nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h2 id="exemplos">Exemplos</h2>
<h3 id="exemplo-1-um-plugin-de-scene-que-ao-se-anexar-a-um-tabuleiro-exibe-uma-mensagem-com-algumas-caracteristicas-do-scene">Exemplo 1 - Um Plugin de Scene que, ao se anexar a um tabuleiro, exibe uma mensagem com algumas características do Scene.</h3>
<p>&nbsp;</p>
<table>
<thead>
<tr>
<th>require("scene.lua"); require("dialogs.lua");   SceneLib.registerPlugin(     <strong>function</strong> (scene, attachment)                    showMessage("Plugin anexado a um tabuleiro de tamanho " ..                     scene.worldWidth .. scene.worldMetricName .. " x " ..                     scene.worldHeight .. scene.worldMetricName ..                     " de cor de fundo ".. scene.bkgColor);     <strong>end</strong>);&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<hr />
<p><em>Created with the Personal Edition of HelpNDoc: <a href="https://www.helpndoc.com/step-by-step-guides/how-to-generate-an-encrypted-password-protected-pdf-document/">Add an Extra Layer of Security to Your PDFs with Encryption</a></em></p>

			<br>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../Ascamadasdotabuleiro/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../Ascamadasdotabuleiro/" class="btn btn-sm btn-link">
			As camadas do tabuleiro
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../ObjetoSceneBaseObject/" class="btn btn-sm btn-link">
			Objeto SceneBaseObject
		</a>
		<a href="../ObjetoSceneBaseObject/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			<br>
		</div>

		<footer class="container-fluid wm-page-content text-center small">
			<p>
			<a href="https://github.com/Krampus-update/firecast-doc-test/edit/master/docs/ObjetoScene.md" target="_blank"><i class="fab fa-github"></i>
Edit on GitHub</a>
			</p>
			<details>
				<summary>
					Documentation built with <a href="http://www.mkdocs.org/" target="_blank">MkDocs</a> using  <a href="https://github.com/Siphalor/mkdocs-custommill" target="_blank">CustomMill</a>.
				</summary>
				<h6 class="mt-2">Additional Licenses</h6>
				<ul><li>
						CustomMill is based on the <a href="https://github.com/gristlabs/mkdocs-windmill" target="_blank">Windmill</a> theme by Grist Labs, licensed under the <a href="https://github.com/gristlabs/mkdocs-windmill/blob/master/LICENSE" target="_blank">MIT License</a>
					</li>
					<li>
						CustomMill includes <a href="https://getbootstrap.com" target="_blank">Bootstrap</a> version 5.1.3. This is available under the <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" target="_blank">MIT License</a>.
					</li>
					<li>
						Syntax highlighting is implemented via <a href="https://highlightjs.org" target="_blank">highlight.js</a> licensed under the BSD 3-Clause License and the included github styling made by Vasily Polovnyov.
					</li>
					<li>
						Icons on this site are from <a href="https://fontawesome.com/" target="_blank">Font Awesome</a> which is licensed under the <a href="https://fontawesome.com/license/free" target="_blank">Font Awesome Free License</a>.
					</li></ul>
				<p>Built at 2023-08-31 02:21:41 UTC</p>
			</details>
		</footer>

		
	</body>
</html>